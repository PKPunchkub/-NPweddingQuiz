<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Namkhing & Punch Wedding Games - ‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÉ‡∏à‡∏Ñ‡∏π‡πà‡∏ö‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏ß</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;700&display=swap');
        body { font-family: 'Kanit', sans-serif; }
        
        .answer-btn {
            transition: all 0.3s ease;
            transform: scale(1);
        }
        
        .answer-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .correct-answer {
            animation: correctPulse 0.6s ease-in-out;
        }
        
        .wrong-answer {
            animation: wrongShake 0.6s ease-in-out;
        }
        
        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); background-color: #10b981; }
            100% { transform: scale(1); }
        }
        
        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .progress-bar {
            transition: width 1s linear;
        }
        
        .player-card {
            transition: all 0.3s ease;
        }
        
        .player-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .floating-hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        
        .heart {
            position: absolute;
            color: #ff69b4;
            font-size: 20px;
            animation: float 6s infinite linear;
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(0);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-400 via-purple-500 to-indigo-600 min-h-screen relative">
    <!-- Floating Hearts Background -->
    <div class="floating-hearts" id="heartsContainer"></div>

    <!-- Toast Notifications -->
    <div id="toastContainer"></div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏Å (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î) -->
    <div id="homeScreen" class="flex items-center justify-center min-h-screen p-4">
        <div class="text-center bg-white rounded-3xl p-8 shadow-2xl max-w-md mx-4">
            <div class="text-6xl mb-4">üíï</div>
            <h1 class="text-3xl font-bold text-gray-800 mb-2">Namkhing & Punch Wedding Games</h1>
            <p class="text-lg text-pink-600 font-semibold mb-6">‡πÄ‡∏Å‡∏°‡∏ó‡∏≤‡∏¢‡πÉ‡∏à‡∏Ñ‡∏π‡πà‡∏ö‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏ß (Guess the Couple's Mind Game)</p>
            
            <!-- ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô -->
            <div class="bg-blue-50 p-4 rounded-xl mb-6 border-2 border-blue-200">
                <h3 class="text-sm font-bold text-blue-800 mb-2">üìã ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (How to Use)</h3>
                <div class="text-xs text-blue-700 space-y-1">
                    <p>üíª <strong>Host:</strong> ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏Å‡∏°</p>
                    <p>üì± <strong>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô:</strong> ‡πÉ‡∏ä‡πâ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏™‡πÅ‡∏Å‡∏ô QR Code</p>
                    <p>üéÆ ‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 250 ‡∏Ñ‡∏ô</p>
                </div>
            </div>
            
            <div class="space-y-4">
                <button onclick="showHostScreen()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-full text-xl font-semibold hover:from-purple-600 hover:to-pink-600 transform hover:scale-105 transition-all duration-300 shadow-lg w-full">
                    üéØ ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏†‡∏≤‡∏û (Host - Create QR Code)
                </button>
                
                <button onclick="showRegisterScreen()" class="bg-gradient-to-r from-pink-500 to-purple-500 text-white px-8 py-4 rounded-full text-xl font-semibold hover:from-pink-600 hover:to-purple-600 transform hover:scale-105 transition-all duration-300 shadow-lg w-full">
                    üë• ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏Å‡∏° (Join Game)
                </button>
            </div>
            
            <div class="mt-6 text-sm text-gray-600">
                <p>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå (Online Players): <span id="onlineCount" class="font-bold text-pink-600">0</span> ‡∏Ñ‡∏ô</p>
            </div>
        </div>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô Admin -->
    <div id="passwordScreen" class="hidden flex items-center justify-center min-h-screen p-4">
        <div class="text-center bg-white rounded-3xl p-8 shadow-2xl max-w-md mx-4">
            <div class="text-6xl mb-4">üîê</div>
            <h1 class="text-3xl font-bold text-gray-800 mb-2">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô Admin (Admin Verification)</h1>
            <p class="text-lg text-purple-600 font-semibold mb-8">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏à‡πâ‡∏≤‡∏†‡∏≤‡∏û (Please enter password to access host mode)</p>
            
            <div class="mb-6">
                <input type="password" id="adminPassword" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô Admin (Admin Password)" 
                       class="w-full px-4 py-3 border-2 border-purple-300 rounded-xl text-lg focus:border-purple-500 focus:outline-none text-center"
                       onkeypress="if(event.key==='Enter') verifyPassword()">
            </div>
            
            <div class="space-y-4">
                <button onclick="verifyPassword()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-4 rounded-full text-xl font-semibold hover:from-purple-600 hover:to-pink-600 transform hover:scale-105 transition-all duration-300 shadow-lg w-full">
                    üîì ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Verify Password)
                </button>
                
                <button onclick="showHomeScreen()" class="bg-gray-500 text-white px-6 py-3 rounded-full text-lg font-semibold hover:bg-gray-600 transform hover:scale-105 transition-all duration-300 shadow-lg w-full">
                    ‚Üê ‡∏Å‡∏•‡∏±‡∏ö (Back)
                </button>
            </div>
        </div>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏†‡∏≤‡∏û (‡∏™‡∏£‡πâ‡∏≤‡∏á QR Code) -->
    <div id="hostScreen" class="hidden flex items-center justify-center min-h-screen p-4">
        <div class="text-center bg-white rounded-3xl p-8 shadow-2xl max-w-lg mx-4">
            <div class="text-4xl mb-4">üéØ</div>
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Host Control Panel</h2>
            <p class="text-lg text-purple-600 font-semibold mb-6">‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏Å‡∏°‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå (Control game from computer)</p>
            
            <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡πâ‡∏≠‡∏á -->
            <div class="bg-purple-100 p-4 rounded-xl mb-6 border-2 border-purple-300">
                <h3 class="text-lg font-bold text-purple-800 mb-2">üè† ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô (Room Status)</h3>
                <div class="grid grid-cols-2 gap-4 text-sm">
                    <div class="bg-white p-3 rounded-lg">
                        <p class="text-gray-600">Room ID</p>
                        <p id="hostRoomDisplay" class="font-bold text-purple-600">-</p>
                    </div>
                    <div class="bg-white p-3 rounded-lg">
                        <p class="text-gray-600">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</p>
                        <p class="font-bold text-green-600"><span id="hostOnlineCount">0</span> ‡∏Ñ‡∏ô</p>
                    </div>
                </div>
                <div class="mt-3 text-xs text-purple-600">
                    <p>‚úÖ ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô - ‡πÉ‡∏´‡πâ‡πÅ‡∏Ç‡∏Å‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</p>
                    <p>üì± ‡πÅ‡∏Ç‡∏Å‡πÉ‡∏ä‡πâ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô | üíª Host ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>
                </div>
            </div>
            
            <!-- QR Code -->
            <div class="bg-gray-50 p-6 rounded-2xl mb-6">
                <div id="qrcode" class="flex justify-center mb-4"></div>
                <p class="text-sm text-gray-600 mb-4">üì± ‡πÉ‡∏´‡πâ‡πÅ‡∏Ç‡∏Å‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡∏ô‡∏µ‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏Å‡∏°<br>(Let guests scan this QR Code with mobile phone to join)</p>
                
                <!-- ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏ä‡∏£‡πå -->
                <div class="bg-white p-4 rounded-xl border-2 border-dashed border-gray-300">
                    <p class="text-xs text-gray-500 mb-2">‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ä‡∏£‡πå‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ (Or share this link):</p>
                    <div class="flex items-center gap-2">
                        <input type="text" id="shareLink" readonly 
                               class="flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg bg-gray-50">
                        <button onclick="copyLink()" class="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-600 transition-colors">
                            üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å (Copy)
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="space-y-4">
                <button onclick="showWaitingScreenAsHost()" class="bg-gradient-to-r from-green-500 to-blue-500 text-white px-8 py-4 rounded-full text-xl font-semibold hover:from-green-600 hover:to-blue-600 transform hover:scale-105 transition-all duration-300 shadow-lg w-full">
                    üìä ‡∏î‡∏π‡∏´‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (View Waiting Room)
                </button>
                
                <button onclick="showHomeScreen()" class="bg-gray-500 text-white px-6 py-3 rounded-full text-lg font-semibold hover:bg-gray-600 transform hover:scale-105 transition-all duration-300 shadow-lg w-full">
                    ‚Üê ‡∏Å‡∏•‡∏±‡∏ö (Back)
                </button>
            </div>
        </div>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô -->
    <div id="registerScreen" class="hidden flex items-center justify-center min-h-screen p-4">
        <div class="text-center bg-white rounded-3xl p-8 shadow-2xl max-w-md mx-4">
            <div class="text-6xl mb-4">üíï</div>
            <h1 class="text-3xl font-bold text-gray-800 mb-2">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏Å‡∏° (Join Game)</h1>
            <p class="text-lg text-pink-600 font-semibold mb-6">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (Fill in your information)</p>
            
            <div class="mb-6">
                <input type="text" id="playerName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (Your Name)" 
                       class="w-full px-4 py-3 border-2 border-pink-300 rounded-xl text-lg focus:border-pink-500 focus:outline-none mb-4">
                <input type="text" id="playerTable" placeholder="‡πÇ‡∏ï‡πä‡∏∞‡∏ó‡∏µ‡πà (Table Number - Optional)" 
                       class="w-full px-4 py-3 border-2 border-pink-300 rounded-xl text-lg focus:border-pink-500 focus:outline-none">
            </div>
            
            <div class="space-y-4">
                <button onclick="registerPlayer()" class="bg-gradient-to-r from-pink-500 to-purple-500 text-white px-8 py-4 rounded-full text-xl font-semibold hover:from-pink-600 hover:to-purple-600 transform hover:scale-105 transition-all duration-300 shadow-lg w-full">
                    ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏Å‡∏° (Join Game) üíñ
                </button>
                
                <button onclick="showHomeScreen()" class="bg-gray-500 text-white px-6 py-3 rounded-full text-lg font-semibold hover:bg-gray-600 transform hover:scale-105 transition-all duration-300 shadow-lg w-full">
                    ‚Üê ‡∏Å‡∏•‡∏±‡∏ö (Back)
                </button>
            </div>
            
            <div class="mt-6 text-sm text-gray-600">
                <p>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå: <span id="onlineCountRegister" class="font-bold text-pink-600">0</span> ‡∏Ñ‡∏ô</p>
            </div>
        </div>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏£‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° -->
    <div id="waitingScreen" class="hidden min-h-screen p-4">
        <div class="max-w-6xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-white mb-4">üéâ ‡∏´‡πâ‡∏≠‡∏á‡∏£‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° (Waiting Room) üéâ</h1>
                <div class="bg-white rounded-full px-6 py-3 inline-block shadow-lg mb-4">
                    <span class="text-xl font-semibold">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Total Players): <span id="totalPlayers" class="text-pink-600">0</span> ‡∏Ñ‡∏ô</span>
                </div>
                <div id="roomInfoWaiting" class="bg-white bg-opacity-20 rounded-full px-4 py-2 inline-block">
                    <span class="text-white text-sm">üè† ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô: <span id="waitingRoomId">-</span></span>
                </div>
            </div>

            <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô -->
            <div class="bg-white rounded-3xl p-6 mb-8 shadow-2xl">
                <h3 class="text-2xl font-bold text-center mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (Your Information)</h3>
                <div class="text-center">
                    <div id="playerCharacter" class="text-6xl mb-4"></div>
                    <p class="text-xl">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ (Hello) <span id="welcomeName" class="font-bold text-pink-600"></span>!</p>
                    <p id="welcomeTable" class="text-gray-600"></p>
                    <p class="text-sm text-gray-500 mt-2">‡∏£‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏ö‡πà‡∏≤‡∏ß‡πÄ‡∏à‡πâ‡∏≤‡∏™‡∏≤‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏ô‡∏∞‡∏Ñ‡∏∞... (Waiting for the bride and groom to start the game...)</p>
                </div>
            </div>

            <!-- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô -->
            <div class="bg-white rounded-3xl p-6 shadow-2xl">
                <h3 class="text-xl font-bold text-center mb-4">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° (Joined Players)</h3>
                <div id="playersList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto">
                    <!-- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                </div>
            </div>

            <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô) -->
            <div class="text-center mt-8 space-y-4">
                <div class="flex justify-center">
                    <button id="startGameBtn" onclick="startGame()" class="bg-gradient-to-r from-green-500 to-blue-500 text-white px-12 py-4 rounded-full text-xl font-semibold hover:from-green-600 hover:to-blue-600 transform hover:scale-105 transition-all duration-300 shadow-lg" style="display: none;">
                        üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° (Start Game)
                    </button>
                </div>
                
                <div id="waitingMessage" class="bg-white rounded-full px-8 py-4 inline-block shadow-lg">
                    <p class="text-lg text-gray-700">‚è≥ ‡∏£‡∏≠ Admin ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°... (Waiting for Admin to start the game...)</p>
                </div>
                
                <button onclick="goBackFromWaiting()" class="bg-gray-500 text-white px-8 py-3 rounded-full text-lg font-semibold hover:bg-gray-600 transform hover:scale-105 transition-all duration-300 shadow-lg">
                    ‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Back)
                </button>
            </div>
        </div>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏Å‡∏° -->
    <div id="gameScreen" class="hidden min-h-screen p-4">
        <!-- Header -->
        <div class="flex justify-between items-center mb-6 flex-wrap gap-4">
            <div class="bg-white rounded-full px-6 py-3 shadow-lg">
                <span class="text-lg font-semibold">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà (Question) <span id="questionNumber">1</span>/5</span>
            </div>
            <div class="bg-white rounded-full px-6 py-3 shadow-lg flex items-center">
                <span id="gamePlayerCharacter" class="text-2xl mr-2">üê∂</span>
                <span class="text-lg font-semibold">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (Score): <span id="score">0</span></span>
            </div>
            <div class="bg-white rounded-full px-6 py-3 shadow-lg">
                <span class="text-lg font-semibold">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (Players): <span id="gamePlayerCount">0</span> ‡∏Ñ‡∏ô</span>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="bg-white rounded-full h-3 mb-8 shadow-inner">
            <div id="progressBar" class="progress-bar bg-gradient-to-r from-pink-400 to-purple-500 h-full rounded-full" style="width: 0%"></div>
        </div>

        <!-- Timer -->
        <div class="text-center mb-6">
            <div id="timer" class="text-6xl font-bold text-white drop-shadow-lg">10</div>
            <p class="text-white text-xl">‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (seconds)</p>
        </div>

        <!-- ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° -->
        <div class="bg-white rounded-3xl p-8 mb-8 shadow-2xl text-center">
            <h2 id="questionText" class="text-2xl md:text-3xl font-bold text-gray-800 mb-4"></h2>
        </div>

        <!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl mx-auto">
            <button id="answer0" class="answer-btn bg-red-500 hover:bg-red-600 text-white p-6 rounded-2xl text-xl font-semibold shadow-lg" onclick="selectAnswer(0)">
                <div class="flex items-center justify-center">
                    <span class="mr-3">üî∫</span>
                    <span id="answerText0"></span>
                </div>
            </button>
            <button id="answer1" class="answer-btn bg-blue-500 hover:bg-blue-600 text-white p-6 rounded-2xl text-xl font-semibold shadow-lg" onclick="selectAnswer(1)">
                <div class="flex items-center justify-center">
                    <span class="mr-3">üíé</span>
                    <span id="answerText1"></span>
                </div>
            </button>
            <button id="answer2" class="answer-btn bg-yellow-500 hover:bg-yellow-600 text-white p-6 rounded-2xl text-xl font-semibold shadow-lg" onclick="selectAnswer(2)">
                <div class="flex items-center justify-center">
                    <span class="mr-3">‚≠ï</span>
                    <span id="answerText2"></span>
                </div>
            </button>
            <button id="answer3" class="answer-btn bg-green-500 hover:bg-green-600 text-white p-6 rounded-2xl text-xl font-semibold shadow-lg" onclick="selectAnswer(3)">
                <div class="flex items-center justify-center">
                    <span class="mr-3">‚¨ú</span>
                    <span id="answerText3"></span>
                </div>
            </button>
        </div>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ Host Dashboard -->
    <div id="hostDashboard" class="hidden min-h-screen p-4">
        <div class="max-w-6xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-white mb-4">üéØ Host Dashboard - ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏Å‡∏°</h1>
                <div class="bg-white rounded-full px-6 py-3 inline-block shadow-lg mb-4">
                    <span class="text-xl font-semibold">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà (Question): <span id="hostQuestionNumber">1</span>/5</span>
                </div>
                <div class="bg-white bg-opacity-20 rounded-full px-4 py-2 inline-block">
                    <span class="text-white text-sm">üè† ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô: <span id="hostRoomId">-</span> | ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô: <span id="hostPlayerCount">0</span> ‡∏Ñ‡∏ô</span>
                </div>
            </div>

            <!-- ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô -->
            <div class="bg-white rounded-3xl p-8 mb-8 shadow-2xl">
                <h3 class="text-2xl font-bold text-center mb-4">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (Current Question)</h3>
                <div class="text-center mb-6">
                    <div id="hostTimer" class="text-6xl font-bold text-purple-600 mb-2">10</div>
                    <p class="text-gray-600 text-xl">‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (Seconds remaining)</p>
                </div>
                <div class="bg-gray-50 p-6 rounded-2xl mb-6">
                    <h4 id="hostQuestionText" class="text-xl font-semibold text-gray-800 mb-4"></h4>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-red-100 p-4 rounded-xl">
                            <span class="text-red-600 font-semibold">üî∫ A:</span>
                            <span id="hostAnswer0" class="ml-2"></span>
                        </div>
                        <div class="bg-blue-100 p-4 rounded-xl">
                            <span class="text-blue-600 font-semibold">üíé B:</span>
                            <span id="hostAnswer1" class="ml-2"></span>
                        </div>
                        <div class="bg-yellow-100 p-4 rounded-xl">
                            <span class="text-yellow-600 font-semibold">‚≠ï C:</span>
                            <span id="hostAnswer2" class="ml-2"></span>
                        </div>
                        <div class="bg-green-100 p-4 rounded-xl" id="hostCorrectAnswer">
                            <span class="text-green-600 font-semibold">‚¨ú D:</span>
                            <span id="hostAnswer3" class="ml-2"></span>
                        </div>
                    </div>
                    <div class="mt-4 text-center">
                        <p class="text-sm text-gray-600">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: <span id="hostCorrectText" class="font-bold text-green-600"></span></p>
                    </div>
                </div>
            </div>

            <!-- ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö Real-time -->
            <div class="bg-white rounded-3xl p-8 mb-8 shadow-2xl">
                <h3 class="text-2xl font-bold text-center mb-6">üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö Real-time</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-red-100 p-4 rounded-xl text-center">
                        <div class="text-2xl font-bold text-red-600" id="answerStatsA">0</div>
                        <div class="text-sm text-red-600">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å A</div>
                    </div>
                    <div class="bg-blue-100 p-4 rounded-xl text-center">
                        <div class="text-2xl font-bold text-blue-600" id="answerStatsB">0</div>
                        <div class="text-sm text-blue-600">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å B</div>
                    </div>
                    <div class="bg-yellow-100 p-4 rounded-xl text-center">
                        <div class="text-2xl font-bold text-yellow-600" id="answerStatsC">0</div>
                        <div class="text-sm text-yellow-600">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å C</div>
                    </div>
                    <div class="bg-green-100 p-4 rounded-xl text-center">
                        <div class="text-2xl font-bold text-green-600" id="answerStatsD">0</div>
                        <div class="text-sm text-green-600">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å D</div>
                    </div>
                </div>
                <div class="text-center">
                    <p class="text-lg">‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß: <span id="answeredCount" class="font-bold text-purple-600">0</span> / <span id="totalPlayersCount">0</span> ‡∏Ñ‡∏ô</p>
                </div>
            </div>

            <!-- Scoreboard -->
            <div class="bg-white rounded-3xl p-8 shadow-2xl">
                <h3 class="text-2xl font-bold text-center mb-6">üèÜ Scoreboard ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h3>
                <div id="hostLeaderboard" class="space-y-3 max-h-96 overflow-y-auto">
                    <!-- Scoreboard ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                </div>
            </div>

            <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° -->
            <div class="text-center mt-8 space-y-4">
                <button onclick="hostEndGame()" class="bg-gradient-to-r from-red-500 to-pink-500 text-white px-8 py-4 rounded-full text-xl font-semibold hover:from-red-600 hover:to-pink-600 transform hover:scale-105 transition-all duration-300 shadow-lg">
                    üèÅ ‡∏à‡∏ö‡πÄ‡∏Å‡∏° (End Game)
                </button>
                
                <button onclick="showHostScreen()" class="bg-gray-500 text-white px-8 py-3 rounded-full text-lg font-semibold hover:bg-gray-600 transform hover:scale-105 transition-all duration-300 shadow-lg">
                    ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏†‡∏≤‡∏û (Back to Host)
                </button>
            </div>
        </div>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå -->
    <div id="resultScreen" class="hidden min-h-screen p-4">
        <div class="max-w-4xl mx-auto">
            <div class="text-center mb-8">
                <div id="resultEmoji" class="text-8xl mb-6">üèÜ</div>
                <h2 class="text-4xl font-bold text-white mb-4">üéâ ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô (Results) üéâ</h2>
            </div>

            <!-- ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô) -->
            <div id="playerScoreSection" class="bg-white rounded-3xl p-8 mb-8 shadow-2xl text-center">
                <h3 class="text-2xl font-bold mb-4">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (Your Score)</h3>
                <p class="text-5xl font-bold text-pink-600 mb-2"><span id="finalScore">0</span>/5</p>
                <p id="playerRank" class="text-xl text-gray-600"></p>
            </div>

            <!-- ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô -->
            <div class="bg-white rounded-3xl p-8 shadow-2xl">
                <h3 class="text-2xl font-bold text-center mb-6">üèÜ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô Top 10 (Top 10 Leaderboard)</h3>
                <div id="leaderboard" class="space-y-3">
                    <!-- ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                </div>
            </div>

            <div class="text-center mt-8">
                <button onclick="restartGame()" class="bg-gradient-to-r from-pink-500 to-purple-500 text-white px-8 py-4 rounded-full text-xl font-semibold hover:from-pink-600 hover:to-purple-600 transform hover:scale-105 transition-all duration-300 shadow-lg">
                    ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà (Play Again) üîÑ
                </button>
            </div>
        </div>
    </div>

    <script>
        // Game client-side logic
        const socket = io();

        // Game state variables
        let currentPlayer = null;
        let currentQuestion = 0;
        let score = 0;
        let timeLeft = 10;
        let timer;
        let gameActive = false;
        let gameStarted = false;
        let isHost = false;
        let roomId = null;
        let players = [];
        let selectedIndex = -1;

        // Initialize game
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Game client initializing...');
            createFloatingHearts();
            checkURLParameters();
            
            // Socket event listeners
            setupSocketListeners();
        });

        // Socket event listeners
        function setupSocketListeners() {
            // Host authentication
            socket.on('host-authenticated', (data) => {
                roomId = data.roomId;
                isHost = true;
                
                hideAllScreens();
                document.getElementById('hostScreen').classList.remove('hidden');
                
                // Update room display
                document.getElementById('hostRoomDisplay').textContent = roomId.slice(-8);
                
                // Generate QR Code
                generateQRCode(data.gameUrl);
                
                console.log('Host authenticated for room:', roomId);
            });
            
            socket.on('host-auth-failed', (data) => {
                alert('‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                document.getElementById('adminPassword').value = '';
                document.getElementById('adminPassword').focus();
            });
            
            // Player registration
            socket.on('registration-success', (data) => {
                currentPlayer = data.player;
                console.log('Player registered successfully:', currentPlayer);
                showWaitingScreen();
            });
            
            socket.on('registration-failed', (data) => {
                alert('‚ùå ' + data.message);
            });
            
            // Player joined notification
            socket.on('player-joined', (data) => {
                updatePlayerCount(data.totalPlayers);
                updatePlayersList();
            });
            
            socket.on('host-player-joined', (data) => {
                updatePlayerCount(data.totalPlayers);
                showToast(`üéâ ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°: ${data.player.name}`, 'success');
                updatePlayersList();
            });
            
            // Game started
            socket.on('game-started', (data) => {
                if (!isHost) {
                    gameStarted = true;
                    currentQuestion = data.currentQuestion;
                    startGameForPlayer(data);
                }
            });
            
            socket.on('host-game-started', (data) => {
                if (isHost) {
                    showHostDashboard();
                    updateHostQuestion(data);
                }
            });
            
            // Next question
            socket.on('next-question', (data) => {
                if (!isHost) {
                    currentQuestion = data.currentQuestion;
                    showQuestion(data);
                }
            });
            
            socket.on('host-next-question', (data) => {
                if (isHost) {
                    updateHostQuestion(data);
                }
            });
            
            // Answer result
            socket.on('answer-result', (data) => {
                handleAnswerResult(data);
            });
            
            // Host answer statistics
            socket.on('host-answer-stats', (data) => {
                if (isHost) {
                    updateAnswerStats(data);
                }
            });
            
            // Game ended
            socket.on('game-ended', (data) => {
                showResults(data.leaderboard);
            });
            
            // Game state
            socket.on('game-state', (data) => {
                players = data.players;
                updatePlayersList();
                updatePlayerCount(players.length);
            });
            
            // Error handling
            socket.on('error', (data) => {
                alert('‚ùå Error: ' + data.message);
            });
        }

        // UI Functions
        function showHomeScreen() {
            hideAllScreens();
            document.getElementById('homeScreen').classList.remove('hidden');
        }

        function showHostScreen() {
            if (isMobileDevice()) {
                alert('‚ö†Ô∏è ‡πÇ‡∏´‡∏°‡∏î Host ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô!\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏Å‡∏°\n\n(Host mode is for computers only!\nPlease use a computer to control the game)');
                return;
            }
            
            hideAllScreens();
            document.getElementById('passwordScreen').classList.remove('hidden');
            document.getElementById('adminPassword').value = '';
            setTimeout(() => {
                document.getElementById('adminPassword').focus();
            }, 100);
        }

        function showRegisterScreen() {
            if (!isMobileDevice()) {
                const usePhone = confirm('üì± ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°!\n‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î\n\n‡∏Ñ‡∏•‡∏¥‡∏Å OK ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏ö‡∏ô‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå\n‡∏´‡∏£‡∏∑‡∏≠ Cancel ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÅ‡∏ó‡∏ô\n\n(Recommended to use mobile phone for playing!\nFor the best experience\n\nClick OK to continue on computer\nor Cancel to use mobile instead)');
                
                if (!usePhone) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå Host\n\n(Please open this website on mobile phone or scan QR Code from Host computer)');
                    return;
                }
            }
            
            hideAllScreens();
            document.getElementById('registerScreen').classList.remove('hidden');
            isHost = false;
        }

        function hideAllScreens() {
            const screens = ['homeScreen', 'passwordScreen', 'hostScreen', 'registerScreen', 'waitingScreen', 'gameScreen', 'resultScreen', 'hostDashboard'];
            screens.forEach(screen => {
                document.getElementById(screen).classList.add('hidden');
            });
        }

        // Host functions
        function verifyPassword() {
            const password = document.getElementById('adminPassword').value;
            console.log('Verifying password:', password);
            socket.emit('host-authenticate', { password: password });
        }

        function generateQRCode(gameUrl) {
            document.getElementById('shareLink').value = gameUrl;
            
            const qrContainer = document.getElementById('qrcode');
            qrContainer.innerHTML = '';
            
            const qrSize = 200;
            const qrURL = `https://chart.googleapis.com/chart?chs=${qrSize}x${qrSize}&cht=qr&chl=${encodeURIComponent(gameUrl)}&choe=UTF-8`;
            
            const img = document.createElement('img');
            img.src = qrURL;
            img.alt = 'QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏Å‡∏°';
            img.className = 'mx-auto border-2 border-purple-300 rounded-lg shadow-lg';
            img.style.width = qrSize + 'px';
            img.style.height = qrSize + 'px';
            
            img.onerror = function() {
                const alternativeQRURL = `https://api.qrserver.com/v1/create-qr-code/?size=${qrSize}x${qrSize}&data=${encodeURIComponent(gameUrl)}`;
                img.src = alternativeQRURL;
            };
            
            qrContainer.appendChild(img);
        }

        function copyLink() {
            const linkInput = document.getElementById('shareLink');
            linkInput.select();
            linkInput.setSelectionRange(0, 99999);
            
            navigator.clipboard.writeText(linkInput.value).then(() => {
                const button = event.target;
                const originalText = button.innerHTML;
                button.innerHTML = '‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß!';
                button.classList.add('bg-green-500');
                button.classList.remove('bg-blue-500');
                
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.classList.remove('bg-green-500');
                    button.classList.add('bg-blue-500');
                }, 2000);
            }).catch(() => {
                try {
                    document.execCommand('copy');
                    alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡πâ‡∏ß!');
                } catch (err) {
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á');
                }
            });
        }

        function showWaitingScreenAsHost() {
            hideAllScreens();
            document.getElementById('waitingScreen').classList.remove('hidden');
            
            document.getElementById('startGameBtn').style.display = 'block';
            document.getElementById('waitingMessage').style.display = 'none';
            
            if (roomId) {
                document.getElementById('waitingRoomId').textContent = roomId.slice(-8);
            }
            
            socket.emit('get-game-state', { roomId: roomId });
        }

        // Player functions
        function registerPlayer() {
            const name = document.getElementById('playerName').value.trim();
            const table = document.getElementById('playerTable').value.trim();
            
            if (!name) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (Please enter your name)');
                return;
            }
            
            if (!roomId) {
                alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (Room not found, please scan QR Code again)');
                return;
            }
            
            socket.emit('player-register', {
                roomId: roomId,
                name: name,
                table: table
            });
        }

        function showWaitingScreen() {
            hideAllScreens();
            document.getElementById('waitingScreen').classList.remove('hidden');
            
            document.getElementById('startGameBtn').style.display = 'none';
            document.getElementById('waitingMessage').style.display = 'block';
            
            if (roomId) {
                document.getElementById('waitingRoomId').textContent = roomId.slice(-8);
            }
            
            if (currentPlayer) {
                document.getElementById('welcomeName').textContent = currentPlayer.name;
                document.getElementById('welcomeTable').textContent = currentPlayer.table ? `‡πÇ‡∏ï‡πä‡∏∞ ${currentPlayer.table}` : '';
                document.getElementById('playerCharacter').textContent = currentPlayer.character;
            }
            
            socket.emit('get-game-state', { roomId: roomId });
        }

        // Game functions
        function startGame() {
            if (!isHost) {
                alert('‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Admin ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÑ‡∏î‡πâ (Only Admin can start the game)');
                return;
            }
            
            socket.emit('start-game', { roomId: roomId });
        }

        function startGameForPlayer(data) {
            hideAllScreens();
            document.getElementById('gameScreen').classList.remove('hidden');
            
            if (currentPlayer) {
                document.getElementById('gamePlayerCharacter').textContent = currentPlayer.character;
            }
            
            score = 0;
            showQuestion(data);
        }

        function showQuestion(data) {
            gameActive = true;
            timeLeft = 10;
            selectedIndex = -1;
            
            // Update UI
            document.getElementById('questionNumber').textContent = data.currentQuestion + 1;
            document.getElementById('score').textContent = score;
            document.getElementById('questionText').textContent = data.question.question;
            
            // Update answer options
            for (let i = 0; i < 4; i++) {
                document.getElementById(`answerText${i}`).textContent = data.question.answers[i];
                document.getElementById(`answer${i}`).disabled = false;
                document.getElementById(`answer${i}`).classList.remove('correct-answer', 'wrong-answer');
            }

            // Update progress bar
            const progress = ((data.currentQuestion + 1) / 5) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            // Start timer
            startTimer();
        }

        function startTimer() {
            document.getElementById('timer').textContent = timeLeft;
            
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    if (gameActive) {
                        selectAnswer(-1); // Time's up
                    }
                }
            }, 1000);
        }

        function selectAnswer(selectedAnswerIndex) {
            if (!gameActive) return;
            
            gameActive = false;
            selectedIndex = selectedAnswerIndex;
            clearInterval(timer);
            
            // Submit answer to server
            socket.emit('submit-answer', {
                roomId: roomId,
                playerId: currentPlayer.id,
                questionIndex: currentQuestion,
                selectedAnswer: selectedAnswerIndex,
                timeLeft: timeLeft
            });
            
            // Disable all buttons
            for (let i = 0; i < 4; i++) {
                document.getElementById(`answer${i}`).disabled = true;
            }
        }

        function handleAnswerResult(data) {
            const correctIndex = data.correctAnswer;
            
            // Show correct answer
            document.getElementById(`answer${correctIndex}`).classList.add('correct-answer');
            
            // Show wrong answer if applicable
            if (data.isCorrect) {
                score = data.score;
                document.getElementById('score').textContent = score;
            } else if (selectedIndex >= 0) {
                document.getElementById(`answer${selectedIndex}`).classList.add('wrong-answer');
            }
            
            // Show result message
            let resultMessage = '';
            if (selectedIndex === -1) {
                resultMessage = '‚è∞ ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! (Time\'s up!)';
            } else if (data.isCorrect) {
                resultMessage = 'üéâ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! (Correct!)';
            } else {
                resultMessage = '‚ùå ‡∏ú‡∏¥‡∏î! (Wrong!)';
            }
            
            const questionText = document.getElementById('questionText');
            const originalText = questionText.textContent;
            questionText.innerHTML = `<div class="text-2xl mb-2">${resultMessage}</div><div class="text-lg">${originalText}</div>`;
        }

        // Host Dashboard functions
        function showHostDashboard() {
            hideAllScreens();
            document.getElementById('hostDashboard').classList.remove('hidden');
            
            document.getElementById('hostRoomId').textContent = roomId ? roomId.slice(-8) : '-';
            socket.emit('get-game-state', { roomId: roomId });
        }

        function updateHostQuestion(data) {
            document.getElementById('hostQuestionNumber').textContent = data.currentQuestion + 1;
            document.getElementById('hostQuestionText').textContent = data.question.question;
            
            // Update answer options
            for (let i = 0; i < 4; i++) {
                document.getElementById(`hostAnswer${i}`).textContent = data.question.answers[i];
            }
            
            // Show correct answer
            document.getElementById('hostCorrectText').textContent = data.question.answers[data.question.correct];
            
            // Start host timer
            startHostTimer();
        }

        function startHostTimer() {
            let hostTimeLeft = 10;
            document.getElementById('hostTimer').textContent = hostTimeLeft;
            
            const hostTimerInterval = setInterval(() => {
                hostTimeLeft--;
                document.getElementById('hostTimer').textContent = hostTimeLeft;
                
                if (hostTimeLeft <= 0) {
                    clearInterval(hostTimerInterval);
                }
            }, 1000);
        }

        function updateAnswerStats(data) {
            document.getElementById('answerStatsA').textContent = data.answerStats[0];
            document.getElementById('answerStatsB').textContent = data.answerStats[1];
            document.getElementById('answerStatsC').textContent = data.answerStats[2];
            document.getElementById('answerStatsD').textContent = data.answerStats[3];
            document.getElementById('answeredCount').textContent = data.answeredCount;
            document.getElementById('totalPlayersCount').textContent = data.totalPlayers;
        }

        function hostEndGame() {
            socket.emit('end-game', { roomId: roomId });
        }

        // Results functions
        function showResults(leaderboard) {
            hideAllScreens();
            document.getElementById('resultScreen').classList.remove('hidden');
            
            if (isHost) {
                document.getElementById('playerScoreSection').style.display = 'none';
            } else {
                document.getElementById('playerScoreSection').style.display = 'block';
                document.getElementById('finalScore').textContent = score;
                
                const playerRank = leaderboard.findIndex(p => p.id === currentPlayer.id) + 1;
                if (playerRank > 0) {
                    document.getElementById('playerRank').textContent = `üèÖ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà ${playerRank} ‡∏à‡∏≤‡∏Å ${leaderboard.length} ‡∏Ñ‡∏ô`;
                }
            }
            
            showLeaderboard(leaderboard);
        }

        function showLeaderboard(leaderboard) {
            const leaderboardElement = document.getElementById('leaderboard');
            leaderboardElement.innerHTML = '';
            
            if (leaderboard.length === 0) {
                leaderboardElement.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <div class="text-4xl mb-2">üèÜ</div>
                        <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</p>
                    </div>
                `;
                return;
            }
            
            leaderboard.forEach((player, index) => {
                const rank = player.rank;
                let rankEmoji = '';
                let bgColor = '';
                
                if (rank === 1) {
                    rankEmoji = 'ü•á';
                    bgColor = 'bg-gradient-to-r from-yellow-200 to-yellow-300 border-2 border-yellow-400';
                } else if (rank === 2) {
                    rankEmoji = 'ü•à';
                    bgColor = 'bg-gradient-to-r from-gray-200 to-gray-300 border-2 border-gray-400';
                } else if (rank === 3) {
                    rankEmoji = 'ü•â';
                    bgColor = 'bg-gradient-to-r from-orange-200 to-orange-300 border-2 border-orange-400';
                } else {
                    rankEmoji = `${rank}`;
                    bgColor = 'bg-gradient-to-r from-blue-100 to-purple-100';
                }
                
                const isCurrentPlayer = currentPlayer && player.id === currentPlayer.id;
                
                const playerRow = document.createElement('div');
                playerRow.className = `${bgColor} p-4 rounded-xl shadow-md flex justify-between items-center ${isCurrentPlayer ? 'ring-4 ring-pink-500 ring-opacity-50' : ''} mb-2`;
                playerRow.innerHTML = `
                    <div class="flex items-center">
                        <span class="text-2xl mr-4 font-bold">${rankEmoji}</span>
                        <div class="text-3xl mr-3">${player.character}</div>
                        <div>
                            <p class="font-bold text-gray-800">${player.name} ${isCurrentPlayer ? '(‡∏Ñ‡∏∏‡∏ì)' : ''}</p>
                            ${player.table ? `<p class="text-sm text-gray-600">‡πÇ‡∏ï‡πä‡∏∞ ${player.table}</p>` : ''}
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-3xl font-bold text-purple-600">${player.score}/${player.totalQuestions}</p>
                        <p class="text-sm text-gray-600">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
                    </div>
                `;
                leaderboardElement.appendChild(playerRow);
            });
        }

        // Utility functions
        function updatePlayersList() {
            const playersList = document.getElementById('playersList');
            if (!playersList) return;
            
            playersList.innerHTML = '';
            
            if (players.length === 0) {
                playersList.innerHTML = `
                    <div class="col-span-full text-center text-gray-500 py-8">
                        <div class="text-4xl mb-2">üë•</div>
                        <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</p>
                    </div>
                `;
                return;
            }
            
            players.forEach((player) => {
                const playerCard = document.createElement('div');
                playerCard.className = 'player-card bg-gradient-to-r from-pink-100 to-purple-100 p-4 rounded-xl shadow-md';
                playerCard.innerHTML = `
                    <div class="text-center">
                        <div class="text-4xl mb-2">${player.character}</div>
                        <p class="font-semibold text-gray-800">${player.name}</p>
                        ${player.table ? `<p class="text-sm text-gray-600">‡πÇ‡∏ï‡πä‡∏∞ ${player.table}</p>` : ''}
                    </div>
                `;
                playersList.appendChild(playerCard);
            });
        }

        function updatePlayerCount(count) {
            const elements = ['onlineCount', 'onlineCountRegister', 'totalPlayers', 'gamePlayerCount', 'hostOnlineCount', 'hostPlayerCount'];
            elements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element) {
                    element.textContent = count;
                }
            });
        }

        function isMobileDevice() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            const mobileRegex = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i;
            const screenWidth = window.screen.width;
            const screenHeight = window.screen.height;
            
            return mobileRegex.test(userAgent) || 
                   (screenWidth <= 768 && screenHeight <= 1024) ||
                   ('ontouchstart' in window) ||
                   (navigator.maxTouchPoints > 0);
        }

        function checkURLParameters() {
            const urlParams = new URLSearchParams(window.location.search);
            const joinParam = urlParams.get('join');
            const roomParam = urlParams.get('room');
            
            if (joinParam === 'true' && roomParam) {
                roomId = roomParam;
                console.log('Joining room from QR Code:', roomId);
                showRegisterScreen();
            } else {
                showHomeScreen();
            }
        }

        function createFloatingHearts() {
            const container = document.getElementById('heartsContainer');
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = 'üíï';
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (Math.random() * 3 + 3) + 's';
                container.appendChild(heart);
                
                setTimeout(() => {
                    heart.remove();
                }, 6000);
            }, 800);
        }

        function showToast(message, type = 'info') {
            const toastContainer = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast bg-${type === 'success' ? 'green' : 'blue'}-500 text-white px-6 py-3 rounded-lg shadow-lg`;
            toast.innerHTML = `
                <div class="flex items-center">
                    <span class="mr-2">${type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è'}</span>
                    <span>${message}</span>
                </div>
            `;
            
            toastContainer.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        function goBackFromWaiting() {
            if (isHost) {
                showHostScreen();
            } else {
                showRegisterScreen();
                if (currentPlayer) {
                    document.getElementById('playerName').value = currentPlayer.name;
                    document.getElementById('playerTable').value = currentPlayer.table;
                }
            }
        }

        function restartGame() {
            currentPlayer = null;
            score = 0;
            currentQuestion = 0;
            gameStarted = false;
            gameActive = false;
            isHost = false;
            roomId = null;
            players = [];
            
            if (timer) {
                clearInterval(timer);
            }
            
            showHomeScreen();
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'975d08c4f001d334',t:'MTc1NjMxMzA3My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
